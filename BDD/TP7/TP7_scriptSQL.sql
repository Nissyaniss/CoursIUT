/*
DROP TABLE GAIN
DROP TABLE MATCH
DROP TABLE TOURNOI
DROP TABLE JOUEUR
*/

CREATE TABLE JOUEUR (
	idJoueur INT PRIMARY KEY,
	nom VARCHAR(30) NOT NULL,
	prenom VARCHAR(30) NOT NULL,
	age SMALLINT NOT NULL,
	nationalite VARCHAR(30) NOT NULL
)

CREATE TABLE TOURNOI (
	idTournoi INT PRIMARY KEY,
	tournoi VARCHAR(30) NOT NULL,
	sponsor VARCHAR(30) NOT NULL	
)

CREATE TABLE MATCH (
	idGagnant INT FOREIGN KEY REFERENCES JOUEUR(idJoueur) NOT NULL,
	idPerdant INT FOREIGN KEY REFERENCES JOUEUR(idJoueur) NOT NULL,
	idTournoi INT FOREIGN KEY REFERENCES TOURNOI(idTournoi) NOT NULL,
	dateMatch date NOT NULL
)

CREATE TABLE GAIN (
	idJoueur INT FOREIGN KEY REFERENCES JOUEUR(idJoueur) NOT NULL,
	idTournoi INT FOREIGN KEY REFERENCES TOURNOI(idTournoi) NOT NULL,
	annee SMALLINT NOT NULL,
	montant DECIMAL(10,2) NOT NULL
	PRIMARY KEY (idJoueur,idTournoi,annee)
)

INSERT INTO JOUEUR VALUES (1,'Martin','Mike',18,'FR')
INSERT INTO JOUEUR VALUES (2,'William','Joe',32,'US')
INSERT INTO JOUEUR VALUES (3,'Buck','Bill',19,'GB')
INSERT INTO JOUEUR VALUES (4,'Dario','Albert',25,'IT')
INSERT INTO JOUEUR VALUES (5,'Mora','Peter',29,'FR')

INSERT INTO TOURNOI VALUES (1,'Garros','Tissot')
INSERT INTO TOURNOI VALUES (2,'Open','Nike')
INSERT INTO TOURNOI VALUES (3,'Wimble','Nike')

INSERT INTO MATCH VALUES (1,2,1,'01/04/2020')
INSERT INTO MATCH VALUES (1,3,1,'02/04/2020')
INSERT INTO MATCH VALUES (1,4,1,'03/04/2020')
INSERT INTO MATCH VALUES (2,3,1,'03/04/2020')
INSERT INTO MATCH VALUES (2,4,1,'10/07/2021')
INSERT INTO MATCH VALUES (3,5,1,'11/07/2021')
INSERT INTO MATCH VALUES (2,3,2,'12/07/2021')
INSERT INTO MATCH VALUES (4,5,2,'12/07/2021')
INSERT INTO MATCH VALUES (2,1,2,'13/07/2021')
INSERT INTO MATCH VALUES (4,3,3,'08/09/2021')
INSERT INTO MATCH VALUES (2,3,3,'08/09/2021')

INSERT INTO GAIN VALUES (1,1,2020,3132.4)
INSERT INTO GAIN VALUES (2,1,2020,2100.1)
INSERT INTO GAIN VALUES (2,1,2021,4132.5)
INSERT INTO GAIN VALUES (2,3,2021,12000)
INSERT INTO GAIN VALUES (4,3,2021,9854.32)

